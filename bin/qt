#!/usr/bin/env ruby

$LOAD_PATH.unshift(File.join(File.realpath(File.dirname($0)), '..', 'lib'))

require 'quadtone'
include Quadtone

subcommands = {
  'profile'     => ProfileTool,
  'separate'    => SeparateTool,
  'add-printer' => AddPrinterTool,
  'dump'        => DumpTool,
}

begin
  subcmd = ARGV.shift or raise ToolUsageError, "No subcommand specified"
  #FIXME: Parse sub-arguments
  subcmd_class = subcommands[subcmd] or raise ToolUsageError, "Unknown subcommand specified"
  subcmd_class.new.run(ARGV)
rescue ToolUsageError => e
  warn e
  exit 1
end